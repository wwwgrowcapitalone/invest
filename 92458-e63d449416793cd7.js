(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92458],{44034:function(t,e,n){"use strict";n.d(e,{D:function(){return D},Jh:function(){return F},LD:function(){return W},WK:function(){return x},XC:function(){return E},dd:function(){return k},j8:function(){return T},kD:function(){return j},nK:function(){return P},oV:function(){return I},tT:function(){return Z},tx:function(){return _},vV:function(){return R}});var r,a,i,o=n(17891),s=n(82845),l=n(9747),c=n(58033),u=n(69977),d=n(5901),p=n(16149),$=n(20111),h=n(68910),v=n(43243),w=n(22150),f=n(98148),C=n(9408),m=n(96616),N=n(5852),g=n(66241),O=n(41324),S=n(56364),W=function(t){var e={onboardingStatus:$.tf.NOT_COMPLETED,isFnoGttOcoAllowed:!1,isFnoGttOcoLimitOrderAllowed:!1,isSpanApiConsumed:!1,isIcebergAllowed:!1};if(!(0,O.ud)()){t(e);return}Promise.allSettled([(0,g.is)(!0),(0,g.JP)()]).then(function(n){var r,a,i,o=(0,c.Z)(n,2),s=o[0],l=o[1],u=null==l?void 0:null===(r=l.value)||void 0===r?void 0:null===(a=r.responseBody)||void 0===a?void 0:a.featuresBlockedForUsers,d=u&&!u.includes(w.h6.FNO_GTT_OCO_ORDER),p=u&&!u.includes(w.h6.FNO_GTT_OCO_LIMIT_ORDER),$=u&&!u.includes(w.h6.FNO_SPAN_API),h=u&&!u.includes(w.h6.FNO_ICEBERG_ORDER);t(e={onboardingStatus:null==s?void 0:null===(i=s.value)||void 0===i?void 0:i.fno_status,isFnoGttOcoAllowed:d,isFnoGttOcoLimitOrderAllowed:p,isSpanApiConsumed:$,isIcebergAllowed:h})}).catch(function(n){console.error(n),t(e)})},_=(r=(0,o.Z)(function(t){var e,n;return(0,d.__generator)(this,function(r){switch(r.label){case 0:if(!(0,m.a)(t))return[2,t];return[4,e=(0,p.kO)().then(function(t){return t.data}).catch(function(t){return console.error(t),$.qb})];case 1:return[2,n=r.sent()]}})}),function(t){return r.apply(this,arguments)}),A=(a=(0,o.Z)(function(t){return(0,d.__generator)(this,function(e){return[2,Promise.allSettled([(0,p.AD)(w.CP.NSE,t),(0,p.Eh)(w.CP.NSE,t)]).then(function(t){var e,n,r=(0,c.Z)(t,2),a=r[0],i=r[1],o=(null==a?void 0:a.status)==="fulfilled"?null==a?void 0:null===(e=a.value)||void 0===e?void 0:e.data:$.vS,l=(null==i?void 0:i.status)==="fulfilled"?null==i?void 0:null===(n=i.value)||void 0===n?void 0:n.data:$.A5;return(0,s.Z)({},o,l)}).catch(function(t){var e,n;(0,f.L9)(v.Z.FNO,h.Z.FnoPqrApiFailed,{errorStatus:null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.data,errorMessage:null==t?void 0:null===(n=t.response)||void 0===n?void 0:n.errorMessage.message}),console.error(t)})]})}),function(t){return a.apply(this,arguments)}),E=(i=(0,o.Z)(function(t,e){var n,r,a,i;return(0,d.__generator)(this,function(o){switch(o.label){case 0:if(r={},n=(0,s.Z)(r,$.vS,$.A5),!t)return[3,2];return[4,A(t)];case 1:n=o.sent(),o.label=2;case 2:return[4,_(e)];case 3:return a=o.sent(),[2,((i={}).priceRangeObj=n,i.marginServiceData=a,i)]}})}),function(t,e){return i.apply(this,arguments)}),I=function(){var t="",e=window.location.href;return e.includes(N.Z6.STOCK+N.Z6.USER+N.Z6.INVESTMENT)?"FnoPositions":e.endsWith(N.Z6.USER+N.Z6.WATCHLIST+N.Z6.STOCK)?"watchlist Page":e.includes(N.Z6.ADVANCE_CHARTS)?"AdvancedCharts":"Product Page"},L=function(){return{buySell:$.KW.BUY}},T=function(t){var e=null!=t?t:{},n=e.marketProtectionPercentage,r=e.price;return n&&0!==r},P=function(t,e){return null===t?$.xX.TGT:null===e?$.xX.SL:$.xX.BOTH},x=function(t){return t===w.kj.GTT_ORDER||t===w.kj.GTT_OCO_ORDER},R=function(t){var e,n=null==t?void 0:t.includes(w.h6.FNO_GTT_OCO_ORDER),r=null==t?void 0:t.includes(w.h6.FNO_GTT_OCO_LIMIT_ORDER),a=null==t?void 0:t.includes(w.h6.FNO_SPAN_API),i=null==t?void 0:t.includes(w.h6.FNO_SINGLE_CANCEL_AND_EXIT_FLOW);return{isFnoGttOcoAllowed:n,isFnoGttOcoLimitOrderAllowed:r,isSpanApiConsumed:a,isFnoSingleClickCancelAndExitAllowed:i,isIcebergAllowed:null==t?void 0:t.includes(w.h6.FNO_ICEBERG_ORDER),isFuturesSpanAllowed:null==t?void 0:t.includes(w.h6.FUTURES_SPAN_API)}};function Z(t){var e=L(),n=j(),r=(0,s.Z)({},e,n,t);C.po(C.wD.LOCAL_STORAGE,S.t.FNO_ORDER_PREFERENCE,r,!0)}function j(){var t=C.cF(C.wD.LOCAL_STORAGE,S.t.FNO_ORDER_PREFERENCE,!0);return(0,m.a)(t)?L():t}var D=function(t,e){var n=[];return t.forEach(function(t){var r=t.qty;if(r>e&&Number(e)){var a=Math.ceil(r/e),i=(0,s.Z)({},t);delete i[r];var o=(0,l.Z)((0,s.Z)({},i),{qty:e}),c=Array(a).fill(o);if(r%e!=0){var d=(0,l.Z)((0,s.Z)({},i),{qty:r-(a-1)*e});c[a-1]=d}n=(0,u.Z)(n).concat((0,u.Z)(c))}else n.push(t)}),n},k=function(t,e){var n=0;return t.forEach(function(t){n+=Math.ceil(t.qty/e)}),n},F=function(t,e){return t.map(function(t){var n=k([t],e);return n<2?0:n})}},92458:function(t,e,n){"use strict";var r=n(92510),a=n(95921),i=n(82845),o=n(43812),s=n(30567),l=n(52406),c=n(22920),u=n(43485),d=n(98148),p=n(23194),$=n(44034),h=n(22150),v=n(30274),w=n(9889),f=n(31670),C=n(87830),m=n(97008),N=n(25538),g=n(90818),O=n(22440),S=n(57150),W=n(96616),_=n(18460),A=n(53375),E=n(10219),I=n(60567),L=n(34159),T=n(40682),P=n(5747),x=n(39582),R=n(5852),Z=n(86706);n(56449);var j=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){var t;return(0,r.Z)(this,n),t=e.apply(this,arguments),t.state={isCreateNewWl:!0,newWlName:"",watchlistsTemp:{},currentWlStatus:{},wlMapInitial:{},wlMapCurrent:{},isChanged:!1,showSaveCta:!1,showPopup:!1},t.getPopUpUI=function(){var e=t.props,n=e.watchListMapLoading,r=e.watchListMapFailed,a=e.getAllWLsMapping;return n?(0,s.jsx)(u.MC,{children:(0,s.jsx)("div",{className:"absolute-center",style:{height:"470px"},children:(0,s.jsx)(_.L,{loaderType:_.a.CIRCULAR_BOLT})})}):r?(0,s.jsx)(u.MC,{children:(0,s.jsxs)("div",{style:{padding:"16px"},children:[(0,s.jsx)(P.ZP,{defaultScreen:x.P.FAILED,overallHeight:400,imgLazyLoad:!1}),(0,s.jsx)("div",{children:(0,s.jsx)(A.B,{buttonText:"Try Again",width:"100%",onClick:a})})]})}):t.getDefaultPopupUI()},t.getDefaultPopupUI=function(){var e,n=t.props.watchLists,r=t.state,a=r.wlMapCurrent,i=r.wlMapInitial,o=r.isChanged,l=r.showSaveCta;return(0,s.jsxs)("div",{className:"wls56DivWrapper",children:[(0,s.jsx)("div",{className:"bodyMedium18",children:"Add Stock to"}),null===(e=Object.entries(null!=n?n:{}))||void 0===e?void 0:e.map(function(e){if((0,W.a)(e))return null;var n=e[1],r=n.watchlistId,o=n.watchlistName,l=n.itemList,c=a[r],u=i[r]^a[r],d=l.length;u&&(a[r]?d++:d--);var p=!c&&d>=h.W2;return(0,s.jsxs)("div",{className:"valign-wrapper wlr65ListItemWrapper cur-po ".concat(p?"wlr65Fade":""),onClick:function(){return p?null:t.onWatchListIconClick(r)},children:[(0,s.jsx)("div",{className:" wlr65IconWrapper",children:c?(0,s.jsx)(O.Z,{className:"contentAccent"}):(0,s.jsx)(S.Z,{className:"contentAccent"})}),(0,s.jsxs)("div",{className:"wlr65NameDiv bodyRegular16",children:[o,p&&(0,s.jsxs)("div",{children:["Can't add more than ",h.W2," items."]})]}),(0,s.jsx)("div",{className:"contentSecondary bodyRegular16",children:"".concat(d," ").concat(d>1?"items":"item")})]},r)}),t.getAddWatchlistUI(),l&&(0,s.jsx)("div",{className:"wlr65saveBtnWrapper",children:(0,s.jsx)(A.B,{buttonText:"SAVE",width:"100%",onClick:t.onSaveClick,isDisabled:!o})})]})},t.getAddWatchlistUI=function(){var e=t.state,n=e.newWlName,r=e.isCreateNewWl,a=t.props.watchLists,i=t.getWlNameError(n),o=!(0,W.a)(i)||(0,W.a)(n);return Object.keys(a).length>=h.LJ?null:(0,s.jsxs)("div",{className:"valign-wrapper wlr65ListItemWrapper cur-po",onClick:t.onNewWlCreateClick,children:[(0,s.jsx)("div",{className:" wlr65IconWrapper",children:(0,s.jsx)(m.Z,{className:"contentAccent"})}),r?(0,s.jsx)("div",{className:"contentAccent wlr65NameDiv bodyMedium16",children:"Create New List"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"wlr65NewWlNameDiv bodyRegular16",children:(0,s.jsx)(E.T,{error:o?i:null,value:n,placeholder:"Enter name",onChange:t.onWlNameEnter})}),(0,s.jsx)("div",{className:"".concat(o?"wlr65Fade":""," wlr65IconWrapperSmall"),onClick:o?null:t.onAddWlSave,children:(0,s.jsx)(N.Z,{className:"contentAccent"})}),(0,s.jsx)("div",{className:" wlr65IconWrapperSmall",onClick:t.onAddWlCancel,children:(0,s.jsx)(g.Z,{className:"contentAccent"})})]})]})},t.getWlNameError=function(e){var n=t.props.watchLists,r=Object.keys(n).map(function(t){return n[t].watchlistName});return(0,p.D1)(e,r)},t.onAddWlCancel=function(e){e.stopPropagation(),t.setState({isCreateNewWl:!0,newWlName:""})},t.onAddWlSave=function(){var e;(0,t.props.addNewWatchlist)(t.state.newWlName),t.setState({isCreateNewWl:!0,newWlName:""})},t.onWlNameEnter=function(e){t.setState({newWlName:e.target.value})},t.onSaveClick=function(){var e=t.state,n=e.wlMapInitial,r=e.wlMapCurrent,a=t.props,i=a.addOrRemoveCompanyInWatchlist,o=a.growwContractId,s=a.closeWatchlistPopup,l=[],c=[];Object.entries(n).forEach(function(t){t[1]&&!r[t[0]]?c.push(t[0]):!t[1]&&r[t[0]]&&l.push(t[0])}),i(o,l,c),s()},t.transformData=function(){var e=t.props,n=e.watchLists,r=e.growwContractId,a=e.popUpVisible,i=e.wlPopupForceOpen,o=[],s={},l=!1,c=Object.keys(n),u=1===c.length&&!i;!(0,W.a)(r)&&(u?t.handleOnlyOneWlCase():(t.setState({showPopup:a}),c.forEach(function(t){var e,a=n[t],i=a.watchlistId,c=a.watchlistName,u=a.itemList;s[i]=null==u?void 0:u.includes(r),l=l||s[i],o.push({name:c,id:i,count:null!==(e=null==u?void 0:u.length)&&void 0!==e?e:0,isInWl:null==u?void 0:u.includes(r)})}),(0,W.a)(n)||t.setState({currentWlStatus:o,wlMapCurrent:s,wlMapInitial:s,showSaveCta:l}),a&&(0,d.L9)(w.Z.Stocks,v.Z.WLPopUp,{growwContractId:r,source:(0,$.oV)()})))},t.resetData=function(){t.setState({isCreateNewWl:!0,newWlName:"",isChanged:!1})},t.handleOnlyOneWlCase=function(){var e=t.props,n=e.watchLists,r=e.growwContractId,a=e.addOrRemoveCompanyInWatchlist,i=Object.keys(n),o=n[i[0]],s=o.watchlistName,l=o.itemList,c="";(0,W.a)(r)||(l.includes(r)?(c="Removed from ".concat(s),a(r,[],[i[0]],function(){return t.showSuccessToast(c)})):l.length<h.W2?(c="Added to ".concat(s),a(r,[i[0]],[],function(){return t.showSuccessToast(c)})):(c=h.Hf.MAX_ITEMS_REACHED,t.showSuccessToast(c,!0)))},t.showSuccessToast=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,a=r.closeWatchlistPopup,i=r.growwContractId;if((0,W.a)(e))return null;var o=(0,s.jsxs)("div",{className:"cur-po",onClick:function(){return t.onToastClick(i)},children:[e,(0,s.jsx)("span",{style:{color:"var(--purple500)"},children:"\xa0 Change"})]});n?I.c.error({subText:o,hideAfter:5}):I.c.success({subText:o}),a()},t.openPinPopup=function(){var e=t.props.openPinPopup;(0,Z.Jk)(),e?e():t.props.history.replace(R.Z6.LOGIN)},t.onToastClick=function(e){(0,t.props.openWatchlistPopup)(e,!0),(0,d.L9)(w.Z.Stocks,v.Z.ToastEditClick)},t.onNewWlCreateClick=function(){t.setState({isCreateNewWl:!1})},t.onWatchListIconClick=function(e){var n=t.state,r=n.wlMapCurrent,a=n.showSaveCta,o=r[e],s=(0,i.Z)({},r);s[e]=!o,t.setState({isChanged:!0,wlMapCurrent:s},a?null:t.onSaveClick)},t}var l=n.prototype;return l.componentDidMount=function(){var t=this.props,e=t.getAllWLsMapping;t.isLoggedIn&&(e(),this.transformData())},l.componentDidUpdate=function(t,e){var n=this.props,r=n.popUpVisible,a=n.isLoggedIn,i=n.getAllWLsMapping;this.props!==t&&r&&!a&&this.openPinPopup(),a&&!t.isLoggedIn&&i(),this.props.popUpVisible||this.setState({showPopup:!1}),this.props!==t&&a&&(this.resetData(),this.transformData())},l.render=function(){var t=this.props,e=t.closeWatchlistPopup,n=t.isLoggedIn,r=this.state.showPopup;return n?(0,s.jsx)(L.P,{visible:r,width:420,onClose:e,closeMaskOnClick:!0,closeOnEsc:!0,showCloseButton:!0,children:this.getPopUpUI()}):null},n}(l.PureComponent),D=function(t){return{watchLists:(0,C.Ns)(t),growwContractId:(0,C.lJ)(t),popUpVisible:(0,C.Ke)(t),wlPopupForceOpen:(0,C._r)(t),watchListMapLoading:(0,C.Jf)(t),watchListMapFailed:(0,C.$D)(),wlDummyState:(0,C.og)(t)}},k={getAllWLsMapping:f.ex,addOrRemoveCompanyInWatchlist:f.Xj,addNewWatchlist:f.sI,closeWatchlistPopup:f.gU,openWatchlistPopup:f.tb};e.Z=(0,c.$j)(D,k)((0,T.I)(j))},56449:function(){}}]);